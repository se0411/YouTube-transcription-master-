# 要件定義書

## 概要

YouTube動画の音声を自動的に文字起こしするツールです。OpenAIのWhisper Large V3モデルを使用して、高精度な日本語および多言語の文字起こしを提供します。

## 要件

### 要件 1

**ユーザーストーリー:** 開発者として、YouTube動画のURLを入力することで、その動画の音声を文字起こししたい。これにより、動画の内容をテキストとして取得し、検索や分析に活用できる。

#### 受け入れ基準

1. WHEN ユーザーがYouTube動画のURLを入力 THEN システムは有効なYouTube URLであることを検証する
2. WHEN 有効なYouTube URLが提供される THEN システムは動画の音声を抽出する
3. WHEN 音声抽出が完了 THEN システムはWhisper Large V3モデルを使用して文字起こしを実行する
4. WHEN 文字起こしが完了 THEN システムは結果をテキストファイルとして出力する

### 要件 2

**ユーザーストーリー:** ユーザーとして、文字起こし処理の進行状況を確認したい。これにより、長時間の動画でも処理状況を把握できる。

#### 受け入れ基準

1. WHEN 文字起こし処理が開始される THEN システムは処理開始メッセージを表示する
2. WHEN 音声抽出中 THEN システムは「音声抽出中...」の進行状況を表示する
3. WHEN 文字起こし中 THEN システムは「文字起こし中...」の進行状況を表示する
4. WHEN 処理が完了 THEN システムは完了メッセージと出力ファイルの場所を表示する

### 要件 3

**ユーザーストーリー:** ユーザーとして、エラーが発生した場合に適切なエラーメッセージを受け取りたい。これにより、問題を特定し対処できる。

#### 受け入れ基準

1. WHEN 無効なYouTube URLが入力される THEN システムは「無効なYouTube URLです」エラーメッセージを表示する
2. WHEN 動画が存在しないまたはアクセスできない THEN システムは「動画にアクセスできません」エラーメッセージを表示する
3. WHEN 音声抽出に失敗 THEN システムは「音声抽出に失敗しました」エラーメッセージを表示する
4. WHEN Whisperモデルの処理に失敗 THEN システムは「文字起こし処理に失敗しました」エラーメッセージを表示する

### 要件 4

**ユーザーストーリー:** 開発者として、異なる出力形式を選択したい。これにより、用途に応じて最適な形式でテキストを取得できる。

#### 受け入れ基準

1. WHEN ユーザーが出力形式を指定しない THEN システムはデフォルトでプレーンテキスト形式で出力する
2. WHEN ユーザーがSRT形式を指定 THEN システムはタイムスタンプ付きのSRT字幕ファイルを出力する
3. WHEN ユーザーがJSON形式を指定 THEN システムは構造化されたJSONファイルを出力する
4. IF 出力ファイルが既に存在する THEN システムは上書き確認を求める

### 要件 5

**ユーザーストーリー:** ユーザーとして、コマンドラインから簡単にツールを実行したい。これにより、スクリプトやバッチ処理に組み込むことができる。

#### 受け入れ基準

1. WHEN ユーザーがコマンドライン引数なしで実行 THEN システムは使用方法を表示する
2. WHEN ユーザーが`--url`オプションでYouTube URLを指定 THEN システムは指定されたURLの文字起こしを実行する
3. WHEN ユーザーが`--output`オプションで出力ファイル名を指定 THEN システムは指定されたファイル名で出力する
4. WHEN ユーザーが`--format`オプションで出力形式を指定 THEN システムは指定された形式で出力する